<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Art Medium Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #222; /* Dark background */
            color: #ccc; /* Slightly darker light text */
        }
        .container {
            background-color: #333; /* Slightly lighter dark background for container */
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); /* Darker shadow */
            text-align: center;
        }
        h1 {
            color: #0c0; /* Darker green for heading */
            margin-bottom: 20px;
        }
        button {
            background-color: #0a0; /* Green button */
            color: #ddd; /* Slightly darker white text on button */
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        button:hover {
            background-color: #070; /* Darker green on hover */
        }
        #mediumDisplay {
            margin-top: 30px;
            font-size: 24px;
            font-weight: bold;
            color: #0c0; /* Darker green for displayed medium */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Generate a Random Art Medium</h1>
        <button id="generateButton">Generate Medium</button>
        <h2>Medium</h2>
        <div id="mediumDisplay">Click "Generate Medium" to get an idea!</div>

        <h2>Surface Size</h2>
        <div id="surfaceSizeDisplay">Click "Generate Medium" to get an idea!</div>
    </div>

    <script>
        let mediums = [];

        // Fetch mediums from mediums.json
        fetch('mediums.json')
            .then(response => response.json())
            .then(data => {
                mediums = data;
            })
            .catch(error => {
                console.error('Error loading mediums:', error);
                document.getElementById('mediumDisplay').textContent = 'Error loading mediums.';
            });

        document.getElementById('generateButton').addEventListener('click', () => {
            if (mediums.length === 0) {
                document.getElementById('mediumDisplay').textContent = 'Loading mediums... please wait.';
                return;
            }

            const rollMedium = (excludeMixedMedia = false) => {
                let availableMediums = mediums;
                if (excludeMixedMedia) {
                    availableMediums = mediums.filter(m => m.name !== "Mixed Media");
                }
                const randomIndex = Math.floor(Math.random() * availableMediums.length);
                const medium = availableMediums[randomIndex];
                let text = medium.name;
                if (medium.options && medium.options.length > 0) {
                    const randomOptionIndex = Math.floor(Math.random() * medium.options.length);
                    text += ` - ${medium.options[randomOptionIndex]}`;
                }
                return text;
            };

            let displayText = "";
            const selectedMedium = mediums[Math.floor(Math.random() * mediums.length)];

            if (selectedMedium.name === "Mixed Media") {
                const randomOptionIndex = Math.floor(Math.random() * selectedMedium.options.length);
                const selectedOption = selectedMedium.options[randomOptionIndex];

                if (selectedOption === "Free For All") {
                    displayText = "Mixed Media";
                } else {
                    const numRolls = parseInt(selectedOption);
                    if (!isNaN(numRolls) && numRolls > 0) {
                        let rolledMedia = [];
                        for (let i = 0; i < numRolls; i++) {
                            rolledMedia.push(rollMedium(true)); // Exclude Mixed Media for sub-rolls
                        }
                        displayText = `Mixed Media - ${rolledMedia.join(", ")}`;
                    } else {
                        displayText = `Mixed Media - ${selectedOption}`; // Fallback for unexpected options
                    }
                }
            } else {
                displayText = selectedMedium.name;
                if (selectedMedium.options && selectedMedium.options.length > 0) {
                    const randomOptionIndex = Math.floor(Math.random() * selectedMedium.options.length);
                    displayText += ` - ${selectedMedium.options[randomOptionIndex]}`;
                }
            }

            document.getElementById('mediumDisplay').textContent = displayText;

            // Generate and display surface size
            const surfaceSizeRoll = Math.floor(Math.random() * 3) + 1; // 1, 2, or 3
            let surfaceSizeText = "";
            if (surfaceSizeRoll === 1) {
                surfaceSizeText = "Small";
            } else if (surfaceSizeRoll === 2) {
                surfaceSizeText = "Medium";
            } else {
                surfaceSizeText = "Large";
            }
            document.getElementById('surfaceSizeDisplay').textContent = surfaceSizeText;
        });
    </script>
</body>
</html>